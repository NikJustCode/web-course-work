<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head th:replace="~{fragments/layout :: head('–ú–æ–∏ –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏')}">
</head>

<body>
    <header th:replace="~{fragments/cabinet-header :: header('–ü–µ—Ä—Å–æ–Ω–∞–ª', '/franchisee/dashboard')}"></header>

    <main class="page-content">
        <section class="employees-section content-card">
            <div class="page-header-actions">
                <h1 class="section-title">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–ª–æ–º</h1>
                <a href="/franchisee/employees/new" class="button button--primary">–î–æ–±–∞–≤–∏—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</a>
            </div>

            <div class="table-responsive">
                <table class="admin-table">
                    <thead>
                        <tr>
                            <th>–§–ò–û</th>
                            <th>–ö–æ–Ω—Ç–∞–∫—Ç—ã</th>
                            <th>–ì—Ä–∞—Ñ–∏–∫ —Ä–∞–±–æ—Ç—ã</th>
                            <th>–û–±—ä–µ–∫—Ç—ã</th>
                            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:each="emp : ${employees}">
                            <td class="cell-bold">
                                <div class="employee-name-cell">
                                    <span th:text="${emp.fullName}">–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω</span>
                                </div>
                            </td>
                            <td>
                                <div class="employee-contacts">
                                    <div class="contact-item">
                                        <span class="contact-icon">üìû</span>
                                        <span th:text="${emp.phone}">+7 900 000-00-00</span>
                                    </div>
                                    <div class="contact-item" th:if="${emp.email != null and !emp.email.isEmpty()}">
                                        <span class="contact-icon">üìß</span>
                                        <span th:text="${emp.email}">ivanov@example.com</span>
                                    </div>
                                </div>
                            </td>
                            <td>
                                <div class="schedule-info">
                                    <span th:if="${emp.scheduleType}" th:text="${emp.scheduleType.displayName}"
                                        class="status-badge status-badge--new">–ü–æ –¥–Ω—è–º</span>
                                    <div class="schedule-details mt-1">
                                        <!-- Weekly days display -->
                                        <div th:if="${emp.scheduleType == T(ru.mokrischev.vendingsupply.model.enums.ScheduleType).WEEKLY_DAYS}"
                                            class="days-chips">
                                            <span th:each="day : ${emp.workingDays}" class="day-chip"
                                                th:text="${day == T(java.time.DayOfWeek).MONDAY ? '–ü–Ω' : 
                                                            day == T(java.time.DayOfWeek).TUESDAY ? '–í—Ç' : 
                                                            day == T(java.time.DayOfWeek).WEDNESDAY ? '–°—Ä' : 
                                                            day == T(java.time.DayOfWeek).THURSDAY ? '–ß—Ç' : 
                                                            day == T(java.time.DayOfWeek).FRIDAY ? '–ü—Ç' : 
                                                            day == T(java.time.DayOfWeek).SATURDAY ? '–°–±' : '–í—Å'}">–ü–Ω</span>
                                        </div>
                                        <!-- Shift pattern display -->
                                        <span
                                            th:if="${emp.scheduleType == T(ru.mokrischev.vendingsupply.model.enums.ScheduleType).SHIFT_PATTERN}"
                                            th:text="'–°—Ö–µ–º–∞: ' + ${emp.shiftPattern}" class="schedule-text">2/2</span>
                                    </div>
                                </div>
                            </td>
                            <td>
                                <div class="machines-count" th:if="${emp.machines != null and !emp.machines.isEmpty()}">
                                    <span class="badge bg-secondary" th:text="${emp.machines.size() + ' –∞–≤—Ç.'}">3
                                        –∞–≤—Ç.</span>
                                    <div class="machines-list-mini">
                                        <small th:each="m, iter : ${emp.machines}"
                                            th:text="${m.name} + ${!iter.last ? ', ' : ''}"></small>
                                    </div>
                                </div>
                                <span th:if="${emp.machines == null or emp.machines.isEmpty()}" class="no-data-text">–ù–µ
                                    –Ω–∞–∑–Ω–∞—á–µ–Ω—ã</span>
                            </td>
                            <td>
                                <div class="table-actions-group">
                                    <a th:href="@{/franchisee/employees/edit/{id}(id=${emp.id})}"
                                        class="button button--small button--warning">–†–µ–¥.</a>
                                    <form th:action="@{/franchisee/employees/delete/{id}(id=${emp.id})}" method="post"
                                        class="inline-form">
                                        <button type="submit" class="button button--small button--danger"
                                            onclick="return confirm('–£–¥–∞–ª–∏—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞?');">–£–¥–∞–ª.</button>
                                    </form>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div th:if="${employees == null or employees.isEmpty()}" class="empty-state">
                <p>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤</p>
            </div>
        </section>
    </main>

    <footer th:replace="~{fragments/footer :: footer}"></footer>
</body>

</html>