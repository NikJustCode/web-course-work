<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head th:replace="~{fragments/layout :: head('Управление товарами')}">
</head>

<body>
    <header th:replace="~{fragments/cabinet-header :: header('Товары', '/admin/dashboard')}"></header>

    <main class="page-content">
        <section class="admin-section content-card">
            <div class="page-header-actions">
                <h1 class="section-title">Список товаров</h1>
                <a href="/admin/products/new" class="button button--primary">Добавить товар</a>
            </div>

            <table class="admin-table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Картинка</th>
                        <th>Название</th>
                        <th>Цена</th>
                        <th>Ед. изм.</th>
                        <th>Действия</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="product : ${products}"
                        th:classappend="${!product.active} ? 'table-row--inactive' : ''">
                        <td th:text="${product.id}">1</td>
                        <td class="cell-centered">
                            <img th:if="${product.imageUrl != null and !product.imageUrl.isEmpty()}"
                                th:src="${product.imageUrl}" class="product-thumbnail" alt="Product Image">
                            <span th:if="${product.imageUrl == null or product.imageUrl.isEmpty()}"
                                class="no-image-text">Нет фото</span>
                        </td>
                        <td>
                            <strong th:text="${product.name}">Кофе</strong>
                            <span th:if="${!product.active}" class="status-badge status-badge--archived">Архив</span>
                        </td>
                        <td th:text="${product.price}">100.00</td>
                        <td th:text="${product.unit}">шт</td>
                        <td>
                            <div class="table-actions-group">
                                <a th:href="@{/admin/products/edit/{id}(id=${product.id})}"
                                    class="button button--small button--warning">Редактировать</a>
                                <form th:if="${product.active}"
                                    th:action="@{/admin/products/delete/{id}(id=${product.id})}" method="post">
                                    <button type="submit" class="button button--small button--danger"
                                        onclick="return confirm('Вы уверены? Товар будет перемещен в архив.');">В
                                        архив</button>
                                </form>
                                <form th:if="${!product.active}"
                                    th:action="@{/admin/products/restore/{id}(id=${product.id})}" method="post"
                                    class="inline-form">
                                    <button type="submit" class="button button--small button--success"
                                        onclick="return confirm('Восстановить товар?');">Восстановить</button>
                                </form>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </section>
    </main>

    <footer th:replace="~{fragments/footer :: footer}"></footer>
</body>

</html>
